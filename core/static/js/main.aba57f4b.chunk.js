(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);n(80);var c=n(1),a=n.n(c),r=n(20),s=n.n(r),i=(n(85),n(24)),o=n(10),j=n(25),l=n(9),d=n.n(l),u=n(11),b=n(8);function O(e,t){var n=t.data,c=void 0===n?null:n,a=t.token,r=void 0===a?null:a,s=t.method,i=void 0===s?"GET":s;return fetch(e,{method:i,headers:{Authorization:r?"Token ".concat(r):"","Content-Type":"application/json"},body:"GET"!==i&&"DELETE"!==i?JSON.stringify(c):null}).then((function(e){return e.ok?"DELETE"===i||e.json():e.json().then((function(t){if(400===e.status){var n=Object.keys(t).map((function(e){return"".concat(t[e].join(" "))}));throw new Error(n.join(" "))}throw new Error(JSON.stringify(t))})).catch((function(t){if("SyntaxError"===t.name)throw new Error(e.statusText);throw new Error(t)}))})).catch((function(e){Object(j.b)(e.message,{type:"error"})}))}function h(e,t){return O("/auth/token/login/",{data:{username:e,password:t},method:"POST"})}function x(e,t){return O("/auth/users/",{data:{username:e,password:t},method:"POST"})}function p(e,t){return O("/api/places/".concat(e,"/"),{token:t})}function m(e,t){return O("/api/categories/",{data:e,token:t,method:"POST"})}var f,v=n(2),g=Object(c.createContext)(),y=function(e){var t=e.children,n=Object(c.useState)(localStorage.getItem("token")),a=Object(b.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(b.a)(i,2),j=o[0],l=o[1],O={token:r,loading:j,signIn:function(){var e=Object(u.a)(d.a.mark((function e(t,n,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,h(t,n);case 3:a=e.sent,console.log(a),a&&a.auth_token&&(localStorage.setItem("token",a.auth_token),s(a.auth_token),c()),l(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),signOut:function(){localStorage.removeItem("token"),s("")},register:function(){var e=Object(u.a)(d.a.mark((function e(t,n,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,x(t,n);case 3:(a=e.sent)&&a.id&&c(),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()};return Object(v.jsx)(g.Provider,{value:O,children:t})},k=g,w=n(109),C=n(108),N=n(110),S=n(70),E=n(111),z=n(112),P=n(118),_=n(117),A=function(e){var t=e.children,n=Object(o.g)(),a=Object(c.useContext)(k);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(P.a,{bg:"light",variant:"light",className:"mb-4",children:[Object(v.jsx)(P.a.Brand,{href:"/",children:"MenYou"}),Object(v.jsx)(_.a,{children:Object(v.jsx)(_.a.Link,{onClick:function(){n.push("/places")},children:"Places"})}),Object(v.jsx)(_.a,{className:"flex-grow-1 justify-content-end",children:a.token?Object(v.jsx)(_.a.Link,{onClick:function(){a.signOut(),n.push("/login")},children:"Log out"}):[Object(v.jsx)(_.a.Link,{onClick:function(){n.replace("/login")},children:"Login"},1),Object(v.jsx)(_.a.Link,{onClick:function(){n.replace("/register")},children:"Register"},2)]})]}),Object(v.jsx)(C.a,{children:t})]})},T=function(){return Object(v.jsx)(A,{children:Object(v.jsx)(w.a,{className:"bg-light",children:Object(v.jsx)(C.a,{children:Object(v.jsxs)(N.a,{children:[Object(v.jsxs)(S.a,{md:6,className:"my-auto",children:[Object(v.jsx)("h1",{children:Object(v.jsx)("b",{children:"Build and Share Custom Restaurant Guides"})}),Object(v.jsx)("h5",{className:"mt-4 mb-4",children:"Share your must-have meals at your go-to spots with your day-one peeps"}),Object(v.jsx)("br",{}),Object(v.jsx)(E.a,{href:"/places",variant:"standard",size:"lg",children:"Build Menu"})]}),Object(v.jsx)("br",{}),Object(v.jsx)(S.a,{md:6,children:Object(v.jsx)(z.a,{src:"https://c.tenor.com/4EauhAI5810AAAAC/lets-order-menu.gif",rounded:!0,fluid:!0})})]})})})})},L=n(120),I=n(116),D=n(113),G=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(b.a)(r,2),i=s[0],j=s[1],l=Object(o.g)(),d=Object(c.useContext)(k);Object(c.useEffect)((function(){d.token&&l.replace("/places")}));return Object(v.jsx)(A,{children:Object(v.jsx)(N.a,{className:"justify-content-center",children:Object(v.jsx)(S.a,{lg:6,md:8,children:Object(v.jsx)(L.a,{children:Object(v.jsxs)(L.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center",children:Object(v.jsx)("b",{children:"LOGIN"})}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Username"}),Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Password"}),Object(v.jsx)(I.a.Control,{type:"password",placeholder:"Enter Password",value:i,onChange:function(e){return j(e.target.value)}})]}),Object(v.jsx)(E.a,{variant:"standard",block:!0,onClick:function(){d.signIn(n,i,(function(){return l.replace("/places")}))},disabled:d.loading,children:d.loading?Object(v.jsx)(D.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Sign In"})]})})})})})},M=n(13),R=n(54),B=n(32),q=n(115),H=n(14),U=n(114),J=n(119),F=n(61),Y=n(12),W=n(78),$=H.a.div(f||(f=Object(M.a)(["\n  border: 1px dashed #ced4d9;\n  border-radius: 5px;\n  color: #6c757d;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 142px;\n  img {\n      height: 140px;\n  }\n"])));var Q,K,V,X,Z,ee,te,ne,ce,ae,re,se=function(e){var t=e.value,n=e.onChange,a=Object(c.useState)(!1),r=Object(b.a)(a,2),s=r[0],i=r[1],o=Object(c.useCallback)((function(e){console.log(e),i(!0),function(e){var t=new FormData;return t.append("file",e),t.append("upload_preset","qr_blynd"),fetch("https://api.cloudinary.com/v1_1/Blynd/image/upload",{method:"POST",body:t}).then((function(e){return e.json()}))}(e[0]).then((function(e){return n(e.url)})).finally((function(){return i(!1)}))}),[]),j=Object(W.a)({onDrop:o,multiple:!1,accept:"image/*"}),l=j.getRootProps,d=j.getInputProps;return Object(v.jsxs)($,Object(Y.a)(Object(Y.a)({},l()),{},{children:[Object(v.jsx)("input",Object(Y.a)({},d())),t?Object(v.jsx)("img",{src:t,alt:"uploaded place"}):s?Object(v.jsx)(D.a,{variant:"standard",animation:"border",role:"status"}):Object(v.jsx)("span",{children:"Drag & drop file here, or click to select file"})]}))},ie=function(e){var t,n=e.place,a=e.onDone,r=e.item,s=void 0===r?{}:r,i=Object(c.useState)(""),o=Object(b.a)(i,2),l=o[0],h=o[1],x=Object(c.useState)(!1),p=Object(b.a)(x,2),f=p[0],g=p[1],y=Object(c.useState)(s.category),w=Object(b.a)(y,2),C=w[0],N=w[1],S=Object(c.useState)(s.name),z=Object(b.a)(S,2),P=z[0],_=z[1],A=Object(c.useState)(s.price||0),T=Object(b.a)(A,2),L=T[0],D=T[1],G=Object(c.useState)(s.description),M=Object(b.a)(G,2),R=M[0],B=M[1],q=Object(c.useState)(s.image),H=Object(b.a)(q,2),Y=H[0],W=H[1],$=Object(c.useState)(void 0===s.is_available||!!s.is_available),Q=Object(b.a)($,2),K=Q[0],V=Q[1],X=Object(c.useRef)(null),Z=Object(c.useContext)(k),ee=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({name:l,place:n.id},Z.token);case 2:(t=e.sent)&&(Object(j.b)("".concat(t.name," was created"),{type:"success"}),N(t.id),h(""),g(!1),a());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c={place:n.id,category:C,name:P,price:L,description:R,image:Y,is_available:K},r=Z.token,O("/api/menu_items/",{data:c,token:r,method:"POST"});case 2:(t=e.sent)&&(Object(j.b)("".concat(t.name," was created"),{type:"success"}),N(""),_(""),D(0),B(""),W(""),V(!0),a());case 4:case"end":return e.stop()}var c,r}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=s.id,r={place:n.id,category:C,name:P,price:L,description:R,image:Y,is_available:K},i=Z.token,O("/api/menu_items/".concat(c,"/"),{data:r,token:i,method:"PATCH"});case 2:(t=e.sent)&&(Object(j.b)("".concat(t.name," updated"),{type:"success"}),N(""),_(""),D(0),B(""),W(""),V(!0),a());case 4:case"end":return e.stop()}var c,r,i}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Category"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsxs)(I.a.Control,{as:"select",value:C,onChange:function(e){return N(e.target.value)},children:[Object(v.jsx)("option",{}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.map((function(e){return Object(v.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(v.jsx)(E.a,{ref:X,variant:"link",onClick:function(){return g(!0)},children:Object(v.jsx)(F.a,{size:25})}),Object(v.jsx)(U.a,{show:f,target:X.current,placement:"bottom",rootClose:!0,onHide:function(){return g(!1)},children:Object(v.jsxs)(J.a,{id:"popover-contained",children:[Object(v.jsx)(J.a.Title,{as:"h3",children:"Category"}),Object(v.jsxs)(J.a.Content,{children:[Object(v.jsx)(I.a.Group,{children:Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Category Name",value:l,onChange:function(e){return h(e.target.value)}})}),Object(v.jsx)(E.a,{variant:"standard",block:!0,onClick:ee,children:"Add Category"})]})]})})]})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Dish name"}),Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Wild Mushroom Pizza",value:P,onChange:function(e){return _(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Commentary"}),Object(v.jsx)(I.a.Control,{as:"textarea",placeholder:"Even if you don't like mushrooms, the goat cheese and truffle are amazing",value:R,onChange:function(e){return B(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Image (optional)"}),Object(v.jsx)(se,{value:Y,onChange:W})]}),Object(v.jsx)(E.a,{variant:"standard",block:!0,onClick:s.id?ne:te,children:s.id?"Update Menu Item":"+ Add Menu Item"})]})},oe=n(75),je=H.a.div(Q||(Q=Object(M.a)(["\n  border-radius: 5px;\n  background-color: white;\n  margin-bottom: 30px;\n  box-shadow: 1px 1px 8px rgba(0,0,0,0.1);\n  display: flex;\n  opacity: ",";\n  > div:first-child {\n      width: 40%;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 5px;\n      background-size: cover;\n  }\n  > div:last-child {\n      padding: 15px 20px;\n      min-height: 150px;\n  }\n"])),(function(e){return e.active?1:.6})),le=function(e){var t=e.item,n=e.onEdit,c=e.onRemove;e.onAdd;return Object(v.jsxs)(je,{active:t.is_available,children:[Object(v.jsx)(S.a,{xs:5,style:{backgroundImage:"url(".concat(t.image,")")}}),Object(v.jsxs)(S.a,{xs:7,class:"d-flex flex-column justify-content-between w-100",children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[Object(v.jsx)("h4",{className:"mb-0",children:Object(v.jsx)("b",{children:t.name})}),Object(v.jsxs)("div",{children:[n?Object(v.jsx)(E.a,{variant:"link",onClick:n,children:Object(v.jsx)(oe.a,{size:20})}):null,c?Object(v.jsx)(E.a,{variant:"link",onClick:c,children:Object(v.jsx)(B.a,{size:20,color:"red"})}):null]})]}),Object(v.jsx)("p",{children:t.description})]}),Object(v.jsx)("div",{className:"d-flex justify-content-between align-items-end",children:Object(v.jsx)("div",{})})]})]})},de=n(64),ue=n.n(de),be=n(76),Oe=H.a.div(K||(K=Object(M.a)(["\n  position: relative;\n"]))),he=H.a.div(V||(V=Object(M.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.5);\n  > div {\n      margin: auto;\n  }\n"]))),xe=H.a.div(X||(X=Object(M.a)(["\n  text-align: center;\n  margin-top: 200px;\n  h1 {\n      font-size: 100px;\n      font-weight: bold;\n      margin-bottom: 50px;\n  }\n  h2 {\n      font-size: 60px;\n      margin-bottom: 100px;\n  }\n"]))),pe=function(e){var t=e.table,n=e.placeId,a=e.placeName,r=Object(c.useRef)(),s=Object(be.useReactToPrint)({content:function(){return r.current}}),i="".concat(window.location.origin,"/menu/").concat(n,"/").concat(t);return Object(v.jsxs)(Oe,{children:[Object(v.jsx)(ue.a,{value:i,size:200}),Object(v.jsx)(he,{children:Object(v.jsxs)("div",{className:"d-flex",children:[Object(v.jsx)(E.a,{variant:"standard",onClick:s,className:"mr-2",children:"Get Code"}),Object(v.jsx)(E.a,{variant:"standard",href:"/menu/".concat(n,"/").concat(t),target:"_blank",className:"mr-2",children:Object(v.jsx)(B.b,{size:25})})]})}),Object(v.jsx)("div",{style:{display:"none"},children:Object(v.jsxs)(xe,{ref:r,children:[Object(v.jsxs)("h1",{children:[a," MenYou"]}),Object(v.jsxs)("h3",{children:["https://menyou.eatblynd.com","/menu/".concat(n,"/").concat(t)]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(ue.a,{value:i,size:500})]})})]})},me=Object(H.a)(E.a)(Z||(Z=Object(M.a)(["\n  width: 30px;\n  height: 30px;\n  margin: 0 10px;\n  font-size: 20px;\n  line-height: 18px;\n"]))),fe=function(e){var t=e.show,n=e.onHide,c=e.place;e.onUpdatePlace;return Object(v.jsx)(q.a,{show:t,onHide:n,size:"lg",centered:!0,children:Object(v.jsx)(q.a.Body,{className:"text-center pt-4",children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)("h3",{children:"Menu QR Code"}),Object(v.jsx)("br",{}),Object(v.jsx)(N.a,{children:Array.from({length:c.number_of_tables},(function(e,t){return t+1})).map((function(e){return Object(v.jsx)(S.a,{lg:4,md:6,className:"mb-4",children:Object(v.jsx)(pe,{table:e,placeId:c.id,placeName:c.name})},e)}))})]})})})},ve=H.a.div(ee||(ee=Object(M.a)(["\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 1px 1px 10px rgba(0,0,0,0.05);\n"]))),ge=function(){var e,t=Object(c.useState)({}),n=Object(b.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(b.a)(s,2),j=i[0],l=i[1],h=Object(c.useState)(null),x=Object(b.a)(h,2),m=x[0],f=x[1],g=Object(c.useState)(!1),y=Object(b.a)(g,2),w=y[0],C=y[1],z=function(){return l(!1)},P=Object(c.useContext)(k),_=Object(o.h)(),T=Object(o.g)(),L=function(){return T.push("/places")},I=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(_.id,P.token);case 2:(t=e.sent)&&r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){window.confirm("Are you sure?")&&function(e,t){return O("/api/categories/".concat(e,"/"),{token:t,method:"DELETE"})}(e,P.token).then(I)},G=function(e){window.confirm("Are you sure?")&&function(e,t){return O("/api/menu_items/".concat(e,"/"),{token:t,method:"DELETE"})}(e,P.token).then(I)};return Object(c.useEffect)((function(){I()}),[]),Object(v.jsxs)(A,{children:[Object(v.jsxs)(N.a,{children:[Object(v.jsx)(S.a,{lg:12,children:Object(v.jsxs)("div",{className:"mb-4",children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between mb-4 align-items-center",children:[Object(v.jsx)(E.a,{variant:"link",onClick:L,children:Object(v.jsx)(R.a,{size:25,color:"black"})}),Object(v.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:a.name}),Object(v.jsx)(E.a,{variant:"link",onClick:function(){var e,t;window.confirm("Are you sure?")&&(e=_.id,t=P.token,O("/api/places/".concat(e,"/"),{token:t,method:"DELETE"})).then(L)},children:Object(v.jsx)(B.a,{size:25,color:"red"})})]}),Object(v.jsx)(E.a,{variant:"link",onClick:function(){return C(!0)},children:Object(v.jsx)(B.c,{size:25})})]})}),Object(v.jsx)(S.a,{md:4,children:Object(v.jsx)(ve,{children:Object(v.jsx)(ie,{place:a,onDone:I})})}),Object(v.jsx)(S.a,{md:8,children:null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.map((function(e){return Object(v.jsxs)("div",{className:"mb-5",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(v.jsx)("h4",{className:"mb-0 mr-2",children:Object(v.jsx)("b",{children:e.name})}),Object(v.jsx)(E.a,{variant:"link",onClick:function(){return D(e.id)},children:Object(v.jsx)(B.a,{size:25,color:"red"})})]}),e.menu_items.map((function(e){return Object(v.jsx)(le,{item:e,onEdit:function(){f(e),l(!0)},onRemove:function(){return G(e.id)}},e.id)}))]},e.id)}))})]}),Object(v.jsx)(q.a,{show:j,onHide:z,centered:!0,children:Object(v.jsxs)(q.a.Body,{children:[Object(v.jsx)("h4",{className:"text-center",children:"Menu Item"}),Object(v.jsx)(ie,{place:a,onDone:function(){I(),z()},item:m})]})}),Object(v.jsx)(fe,{show:w,onHide:function(){return C(!1)},place:a,centered:!0,onUpdatePlace:function(e){var t,n,c;(t=a.id,n={number_of_tables:e},c=P.token,O("/api/places/".concat(t,"/"),{data:n,token:c,method:"PATCH"})).then((function(e){e&&r(e)}))}})]})},ye=function(e){var t=e.onDone,n=Object(c.useState)(""),a=Object(b.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(b.a)(i,2),j=o[0],l=o[1],h=Object(c.useState)(""),x=Object(b.a)(h,2),p=x[0],f=x[1],g=Object(c.useState)(""),y=Object(b.a)(g,2),w=y[0],C=y[1],N=Object(c.useContext)(k),S=function(){var e=Object(u.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c={name:r,address:j,site:p,image:w},a=N.token,O("/api/places/",{data:c,token:a,method:"POST"});case 2:(n=e.sent)&&(s(""),l(""),f(""),C(""),["Starters","Mains"].forEach(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({name:t,place:n.id},N.token);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t());case 4:case"end":return e.stop()}var c,a}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"text-center",children:"Place"}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Name"}),Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Enter Name",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Address"}),Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Enter Address",value:j,onChange:function(e){return l(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Site"}),Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Enter Site",value:p,onChange:function(e){return f(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Image (optional)"}),Object(v.jsx)(se,{value:w,onChange:C})]}),Object(v.jsx)(E.a,{variant:"standard",block:!0,onClick:S,children:"Add"})]})},ke=H.a.div(te||(te=Object(M.a)(["\n  margin-bottom: 20px;\n  cursor: pointer;\n  transition: all 0.2s;\n  :hover {\n      transform: scale(1.05)\n  }\n  > div {\n      background-size: cover;\n      height: 200px;\n      border-radius: 5px;\n  }\n  > p {\n      margin-top: 5px;\n      font-size: 20px;\n      font-weight: bold;\n  }\n"]))),we=H.a.div(ne||(ne=Object(M.a)(["\n    border: 1px dashed gray;\n    height: 200px;\n    border-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 20px;\n    cursor: pointer;\n    background-color: white;\n    :hover {\n        background-color: #fbfbfb;\n    }\n"]))),Ce=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(b.a)(r,2),i=s[0],j=s[1],l=Object(c.useContext)(k),h=Object(o.g)(),x=function(){return j(!1)},p=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/api/places/",{token:l.token});case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){p()}),[]);return Object(v.jsxs)(A,{children:[Object(v.jsx)("h3",{children:"My Places"}),Object(v.jsx)(q.a,{show:i,onHide:x,centered:!0,children:Object(v.jsx)(q.a.Body,{children:Object(v.jsx)(ye,{onDone:function(){p(),x()}})})}),Object(v.jsxs)(N.a,{children:[n.map((function(e){return Object(v.jsx)(S.a,{lg:4,children:Object(v.jsxs)(ke,{onClick:function(){return h.push("/places/".concat(e.id))},children:[Object(v.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")}}),Object(v.jsx)("p",{children:e.name})]})},e.id)})),Object(v.jsx)(S.a,{lg:4,children:Object(v.jsx)(we,{onClick:function(){return j(!0)},children:"Add New Place"})})]})]})},Ne=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(b.a)(r,2),i=s[0],j=s[1],l=Object(o.g)(),d=Object(c.useContext)(k);Object(c.useEffect)((function(){d.token&&l.replace("/places")}));return Object(v.jsx)(A,{children:Object(v.jsx)(N.a,{className:"justify-content-center",children:Object(v.jsx)(S.a,{lg:6,md:8,children:Object(v.jsx)(L.a,{children:Object(v.jsxs)(L.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center",children:Object(v.jsx)("b",{children:"REGISTER"})}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Username"}),Object(v.jsx)(I.a.Control,{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(v.jsxs)(I.a.Group,{children:[Object(v.jsx)(I.a.Label,{children:"Password"}),Object(v.jsx)(I.a.Control,{type:"password",placeholder:"Enter Password",value:i,onChange:function(e){return j(e.target.value)}})]}),Object(v.jsx)(E.a,{variant:"standard",block:!0,onClick:function(){d.register(n,i,(function(){return l.replace("/places")}))},disabled:d.loading,children:d.loading?Object(v.jsx)(D.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register"})]})})})})})},Se=n(34),Ee=H.a.div(ce||(ce=Object(M.a)(["\n  text-align: center;\n  img {\n      border-radius: 5px;\n      margin-bottom: 20px;\n  }\n"]))),ze=function(e){var t,n=e.place,c=e.cart,a=e.onAdd;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(Ee,{children:[n.image&&Object(v.jsx)("img",{src:n.image,width:100,height:100,alt:"Place logo"}),Object(v.jsx)("h3",{children:Object(v.jsx)("b",{children:n.name})}),Object(v.jsx)("p",{children:n.address})]}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.filter((function(e){return e.menu_items.filter((function(e){return e.is_available})).length})).map((function(e){return Object(v.jsxs)("div",{className:"mt-5",children:[Object(v.jsx)("h4",{className:"mb-4",children:Object(v.jsx)("b",{children:e.name})}),e.menu_items.filter((function(e){return e.is_available})).map((function(e){var t;return Object(v.jsx)(le,{item:Object(Y.a)(Object(Y.a)({},e),{},{quantity:null===(t=c[e.id])||void 0===t?void 0:t.quantity}),onAdd:a},e.id)}))]},e.id)}))]})},Pe=n(77),_e=n(38),Ae=function(e){var t=e.amount,n=e.items,a=e.onDone,r=Object(c.useState)(!1),s=Object(b.a)(r,2),i=s[0],l=s[1],h=Object(_e.useStripe)(),x=Object(_e.useElements)(),p=Object(c.useContext)(k),m=Object(o.h)(),f=function(){var e=Object(u.a)(d.a.mark((function e(c){var r,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),null!=x){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.createPaymentMethod({type:"card",card:x.getElement(_e.CardElement)});case 5:if(r=e.sent,s=r.error,i=r.paymentMethod,s){e.next=14;break}return l(!0),e.next=12,d={payment_method:i,amount:t,place:m.id,table:m.table,detail:n},u=p.token,O("/api/create_payment_intent/",{data:d,token:u,method:"POST"});case 12:(null===(o=e.sent)||void 0===o?void 0:o.success)?(Object(j.b)("Your order #".concat(o.order," is proccessing"),{type:"success"}),a(),l(!1)):(null===o||void 0===o?void 0:o.error)&&(Object(j.b)(o.error,{type:"error"}),l(!1));case 14:case"end":return e.stop()}var d,u}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(I.a,{onSubmit:f,children:[Object(v.jsx)(_e.CardElement,{options:{hidePostalCode:!0}}),Object(v.jsx)(E.a,{variant:"standard",className:"mt-4",block:!0,type:"submit",disabled:i,children:i?"Processing...":"Pay"})]})},Te=Object(Pe.a)("pk_test_UWzv2vIvXBwDKy9bADOUMU4C005WuVQ1v1"),Le=function(e){return Object(v.jsx)(_e.Elements,{stripe:Te,children:Object(v.jsx)(Ae,Object(Y.a)({},e))})},Ie=function(e){var t=e.items,n=e.onAdd,a=e.onRemove,r=e.onPaymentDone,s=Object(c.useMemo)((function(){return t.map((function(e){return e.quantity*e.price})).reduce((function(e,t){return e+t}),0)}),[t]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:Object(v.jsx)("b",{children:"Tip Jar"})}),Object(v.jsx)(L.a,{children:Object(v.jsxs)(L.a.Body,{children:[t.map((function(e){return Object(v.jsxs)("div",{className:"d-flex mb-4 align-items-center",children:[Object(v.jsxs)("div",{className:"flex-grow-1",children:[Object(v.jsx)("p",{className:"mb-0",children:Object(v.jsx)("b",{children:e.name})}),Object(v.jsxs)("span",{children:["$",e.price]})]}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(me,{variant:"lightgray",size:"sm",onClick:function(){return a(e)},children:"-"}),Object(v.jsx)("span",{children:e.quantity}),Object(v.jsx)(me,{variant:"lightgray",size:"sm",onClick:function(){return n(e)},children:"+"})]})]},e.id)})),Object(v.jsxs)("div",{className:"d-flex mb-4 align-items-center",children:[Object(v.jsx)("div",{className:"flex-grow-1",children:Object(v.jsx)("p",{className:"mb-0",children:Object(v.jsx)("b",{children:'"YOLO"'})})}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(me,{variant:"lightgray",size:"sm",children:"-"}),Object(v.jsx)("span",{children:"20%"}),Object(v.jsx)(me,{variant:"lightgray",size:"sm",children:"+"})]})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(v.jsx)("h5",{children:Object(v.jsx)("b",{children:"Total"})}),Object(v.jsx)("h5",{children:Object(v.jsxs)("b",{children:["$",s]})})]}),Object(v.jsx)("hr",{className:"mb-4"}),Object(v.jsx)(Le,{amount:s,items:t,onDone:r})]})})]})},De=(Object(H.a)(E.a)(ae||(ae=Object(M.a)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 50%;\n  box-shadow: 1px 1px 8px rgba(0,0,0,0.2);\n  width: 60px;\n  height: 60px;\n"]))),Object(H.a)(E.a)(re||(re=Object(M.a)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 50%;\n  box-shadow: 1px 1px 8px rgba(0,0,0,0.2);\n  width: 75px;\n  height: 75px;\n"]))),function(){var e=Object(c.useState)({}),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({}),s=Object(b.a)(r,2),i=s[0],j=s[1],l=Object(c.useState)(!1),O=Object(b.a)(l,2),h=(O[0],O[1]),x=Object(c.useState)(!1),m=Object(b.a)(x,2),f=m[0],g=(m[1],Object(o.h)()),y=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(g.id);case 2:(t=e.sent)&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var t;j(Object(Y.a)(Object(Y.a)({},i),{},Object(Se.a)({},e.id,Object(Y.a)(Object(Y.a)({},e),{},{quantity:((null===(t=i[e.id])||void 0===t?void 0:t.quantity)||0)+1}))))},w=Object(c.useMemo)((function(){return Object.keys(i).map((function(e){return i[e].quantity})).reduce((function(e,t){return e+t}),0)}),[i]);return Object(c.useEffect)((function(){y()}),[]),Object(v.jsx)(C.a,{className:"mt-5 mb-5",children:Object(v.jsx)(N.a,{className:"justify-content-center",children:Object(v.jsx)(S.a,{lg:8,children:f?Object(v.jsx)(Ie,{items:Object.keys(i).map((function(e){return i[e]})).filter((function(e){return e.quantity>0})),onAdd:k,onRemove:function(e){var t;1===w&&h(!1),j(Object(Y.a)(Object(Y.a)({},i),{},Object(Se.a)({},e.id,Object(Y.a)(Object(Y.a)({},e),{},{quantity:((null===(t=i[e.id])||void 0===t?void 0:t.quantity)||0)-1}))))},onPaymentDone:function(){j({}),h(!1)}}):Object(v.jsx)(ze,{place:n,cart:i,onAdd:k})})})})}),Ge=function(e){var t=e.order,n=e.onComplete;return Object(v.jsxs)(L.a,{className:"mb-3",children:[Object(v.jsxs)(L.a.Header,{className:"d-flex justify-content-between",children:[Object(v.jsx)("span",{children:"Order #".concat(t.id," - Table #").concat(t.table)}),Object(v.jsx)("span",{children:Object(v.jsxs)("b",{children:["$",t.amount]})})]}),Object(v.jsxs)(L.a.Body,{className:"d-flex justify-content-between",children:[Object(v.jsx)("div",{children:JSON.parse(t.detail).map((function(e){return Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsxs)("span",{children:["x",e.quantity]}),Object(v.jsx)("img",{src:e.image,width:30,height:30,style:{borderRadius:3,margin:"0 10px"}}),Object(v.jsx)("span",{children:e.name})]})}))}),Object(v.jsx)("div",{children:n?Object(v.jsx)(E.a,{variant:"standard",size:"md",onClick:n,children:"Done"}):null})]})]})},Me=function(){var e,t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],s=Object(o.h)(),i=Object(o.g)(),j=Object(c.useContext)(k),l=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=s.id,c=j.token,O("/api/orders/?place=".concat(n),{token:c});case 2:t=e.sent,console.log(t),t&&r(t);case 5:case"end":return e.stop()}var n,c}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,c={status:"completed"},a=j.token,O("/api/orders/".concat(n,"/"),{data:c,token:a,method:"PATCH"});case 2:e.sent&&l();case 4:case"end":return e.stop()}var n,c,a}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){l();var e=setInterval((function(){l()}),5e3);return function(){return clearInterval(e)}}),[]),Object(v.jsxs)(A,{children:[Object(v.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(v.jsx)(E.a,{variant:"link",onClick:function(){return i.push("/places/".concat(s.id))},children:Object(v.jsx)(R.a,{size:25,color:"black"})}),Object(v.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:"My Orders"})]}),Object(v.jsx)(N.a,{className:"justify-content-center",children:null===a||void 0===a||null===(e=a.filter((function(e){return"processing"===e.status})))||void 0===e?void 0:e.map((function(e){return Object(v.jsx)(S.a,{lg:8,children:Object(v.jsx)(Ge,{order:e,onComplete:function(){return h(e.id)}})},e.id)}))})]})},Re=n(79),Be=["children"];var qe=function(e){var t=e.children,n=Object(Re.a)(e,Be),a=Object(c.useContext)(k);return Object(v.jsx)(o.b,Object(Y.a)(Object(Y.a)({},n),{},{render:function(e){var n=e.location;return a.token?t:Object(v.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}}))};var He=function(){return Object(v.jsxs)(y,{children:[Object(v.jsx)(i.a,{children:Object(v.jsxs)(o.d,{children:[Object(v.jsx)(o.b,{exact:!0,path:"/",children:Object(v.jsx)(T,{})}),Object(v.jsx)(o.b,{exact:!0,path:"/login",children:Object(v.jsx)(G,{})}),Object(v.jsx)(o.b,{exact:!0,path:"/register",children:Object(v.jsx)(Ne,{})}),Object(v.jsx)(o.b,{exact:!0,path:"/menu/:id/:table",children:Object(v.jsx)(De,{})}),Object(v.jsx)(qe,{exact:!0,path:"/places/:id",children:Object(v.jsx)(ge,{})}),Object(v.jsx)(qe,{exact:!0,path:"/places",children:Object(v.jsx)(Ce,{})}),Object(v.jsx)(qe,{exact:!0,path:"/places/:id/orders",children:Object(v.jsx)(Me,{})})]})}),Object(v.jsx)(j.a,{})]})};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(He,{})}),document.getElementById("root"))},85:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.aba57f4b.chunk.js.map